<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="newPost.css">
    <script src="https://kit.fontawesome.com/aa81b533a9.js" crossorigin="anonymous"></script>
    <title>Same Pinch</title>
</head>
<body>
    <nav class="navbar">
        <div class="logo" onclick="">
            <a href=""><img class="logos" src="/images/logo.png" alt="Same pincH"></a>
        </div>
        <div class="nav-buttons">
            <button class="btn add_button" onclick=""><i class="fa-regular fa-square-plus fa-lg"></i></button>
            <button class="btn" onclick=""><i class="fa-solid fa-bell fa-lg"></i></button>
        </div>
    </nav>

    <div class="theContent">


        <main>
            <div class="container">
                <div class="iu">
                    <h1 class="newpost">Create New Post</h1><br>
                    <p class="tags">Upload Photo</p><br>
                    <input type="file" accept="image/*" id="fileUpload" onchange="previewImage(event)">


                    
                </div>
        
                <div class="caption-section">
                    <textarea id="caption" placeholder="Write a caption..."></textarea>
                    <input type="text" placeholder="Tag person" id="tagPerson" style="width: 400px; height:100px; padding: 10px; margin-top: 10px; box-shadow: 0px 0px 5px #ead3fe;
                    border-radius: 15px;">
                    <button id="shareButton" class="sharebutton" onclick="generateDiv()">Share</button>
                </div>
            </div>
        
        </main>



    </div>

    <footer class="footer">
        <button class="btn"><i class="fa-duotone fa-solid fa-house-chimney fa-lg"></i>  Home</button>
        <button class="btn" onclick="openCommPage()"><i class="fa-solid fa-users fa-lg"></i>  Community</button>
        <button class="btn" onclick="openMessPage()"><i class="fa-sharp-duotone fa-solid fa-comments fa-lg"></i>  Message</button>
        <button class="btn" onclick="openUserPage()"><i class="fa-solid fa-circle-user fa-lg"></i>  Profile</button>
    </footer>


    <script>
        
        function previewImage(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('imagePreview');

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block'; // Show the image preview
                };
                reader.readAsDataURL(file);
            }
        }
        
        document.getElementById('shareButton').addEventListener('click', function() {
        const fileInput = document.getElementById('fileUpload');
        const caption = document.getElementById('caption').value;
        const tag = document.getElementById('tagPerson').value
        // Check if an image is selected
        if (fileInput.files.length > 0) {
            const file = fileInput.files[0];
            const reader = new FileReader();
            reader.onloadend = function() {
                localStorage.setItem('uploadedImage', reader.result); // Save image
                localStorage.setItem('captionText', caption); // Save caption
                localStorage.setItem('tagText',tag);
                alert('Image and caption uploaded successfully');
                window.location.href = "home.html";
            };
            reader.readAsDataURL(file);
        } else {
            alert('Please select an image to upload');
        }
        });


        

    </script>
    <script src="/Home/divCreator.js"></script>
    <script src="/navigation.js"></script>
</body>
</html>